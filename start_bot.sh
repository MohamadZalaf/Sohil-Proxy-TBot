#!/bin/bash

echo "๐ ุจุฏุก ุชุดุบูู ุจูุช ุจูุน ุงูุจุฑููุณูุงุช..."
echo "๐ฆ ุงูุชุญูู ูู ุงููุชุทูุจุงุช..."

# ุชุญูู ูู ูุฌูุฏ Python
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Python3 ุฃููุงู."
    exit 1
fi

# ุชุญูู ูู ูุฌูุฏ pip
if ! command -v pip &> /dev/null && ! command -v pip3 &> /dev/null; then
    echo "โ pip ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช pip ุฃููุงู."
    exit 1
fi

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "๐ฅ ุชุซุจูุช ุงููุชุทูุจุงุช..."
pip3 install --break-system-packages -r requirements.txt

if [ $? -eq 0 ]; then
    echo "โ ุชู ุชุซุจูุช ุงููุชุทูุจุงุช ุจูุฌุงุญ"
else
    echo "โ ูุดู ูู ุชุซุจูุช ุงููุชุทูุจุงุช"
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ ุงูุชููู
if grep -q "TOKEN = \"\"" simpl_bot.py; then
    echo "โ๏ธ  ุชุญุฐูุฑ: ูู ูุชู ุชุนููู TOKEN ูู ุงูููู. ูุฑุฌู ุฅุถุงูุฉ ุชููู ุงูุจูุช."
    echo "ูู ุจุชุญุฑูุฑ ุงูููู simpl_bot.py ูุถุน ุงูุชููู ูู ุงูุณุทุฑ ุงูุฐู ูุญุชูู ุนูู:"
    echo 'TOKEN = "YOUR_BOT_TOKEN_HERE"'
    echo ""
    read -p "ูู ุชุฑูุฏ ุงููุชุงุจุนุฉุ (y/n): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi

echo "๐ฏ ุชุดุบูู ุงูุจูุช..."
echo "๐ ูุฅููุงู ุงูุจูุชุ ุงุถุบุท Ctrl+C"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"

# ุชุดุบูู ุงูุจูุช
python3 simpl_bot.py